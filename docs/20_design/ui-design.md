# UI/UX 設計書

## 1. 概要

Colon（コロン）のWeb管理画面のUI/UX設計書。ユーザーはこのWebサイトからボットの作成・カスタマイズ・招待、録画の閲覧を行う。

### デザインコンセプト

- toC サービスのような親しみやすく楽しいデザイン
- 堅苦しすぎない敬語ベースの文言
- 日本語デフォルト（英語切り替えは構造のみ準備済み、UIテキストは日本語ハードコード）
- モバイルレスポンシブ対応

### カラーパレット（案）

| 用途 | カラー | 説明 |
|------|--------|------|
| Primary | `#6C5CE7` | 紫系 - 楽しさ・創造性を表現 |
| Secondary | `#00B894` | 緑系 - 安心感・信頼性 |
| Accent | `#FDCB6E` | 黄色系 - ポップなアクセント（定義済みだが未使用） |
| Background | `#F8F9FA` | ライトグレー - 清潔感 |
| Text | `#2D3436` | ダークグレー - 読みやすさ |
| Error/Danger | Tailwind `red-600` (`#DC2626`) | 赤系 - 警告・エラー・削除ボタン |

---

## 2. 画面一覧

| No | 画面名 | パス | 認証 | 説明 |
|----|--------|------|------|------|
| 1 | ランディングページ | `/{locale}/` | 不要 | サービス紹介＋ログインCTA |
| 2 | 認証コールバック | `/{locale}/auth/callback` | - | Cognito OAuth コールバック処理 |
| 3 | ダッシュボード | `/{locale}/dashboard` | 必要 | ボット一覧・管理のホーム画面 |
| 4 | ボット作成 | `/{locale}/bots/new` | 必要 | 新規ボット作成フォーム |
| 5 | ボット詳細・編集 | `/{locale}/bots/detail?id={botId}` | 必要 | ボット設定の確認・編集 |
| 6 | ボット招待 | `/{locale}/bots/invite?id={botId}` | 必要 | ミーティングへのボット招待 |
| 7 | 録画一覧 | `/{locale}/recordings` | 必要 | 録画リスト |
| 8 | 録画詳細 | `/{locale}/recordings/detail?id={recordingId}` | 必要 | 録画再生・詳細 |
| 9 | 設定 | `/{locale}/settings` | 必要 | ユーザー設定（言語等） |

> **注意**:
> - Next.js の `output: "export"` (S3静的ホスティング) では動的パスセグメント (`[id]`) が使用不可のため、IDはクエリパラメータで渡す方式を採用。
> - `{locale}` は `ja` または `en`。`generateStaticParams` で静的生成される。
> - 現在の実装では、ナビゲーションリンクの多くが `/ja/` にハードコードされている。

---

## 3. 画面詳細

### 3.1 ランディングページ（`/`）

#### 目的
サービスの魅力を伝え、Googleアカウントでのログインを促す。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header: ロゴ(Colon)  [ログイン]         │
├─────────────────────────────────────────┤
│                                         │
│  ヒーローセクション                       │
│  「あなたのミーティングを、もっと楽しく。」  │
│  サービス説明テキスト                      │
│  [Googleでログイン] ボタン                │
│                                         │
├─────────────────────────────────────────┤
│  特徴セクション（3カラム）                  │
│  ┌────────┐ ┌────────┐ ┌────────┐      │
│  │要約機能 │ │話題提供 │ │録画機能 │      │
│  │アイコン │ │アイコン │ │アイコン │      │
│  │説明文   │ │説明文   │ │説明文   │      │
│  └────────┘ └────────┘ └────────┘      │
├─────────────────────────────────────────┤
│  使い方セクション（3ステップ）              │
│  1. ログイン → 2. カスタマイズ → 3. 招待   │
├─────────────────────────────────────────┤
│  Footer: © Colon / 利用規約 / プライバシー  │
└─────────────────────────────────────────┘
```

#### テキスト案

- キャッチコピー: 「あなたのミーティングを、もっと楽しく。」
- サブコピー: 「Colonは、Google Meetに招待できるカスタマイズ可能なインタラクティブボットサービスです。会議の要約、話題の提供、録画まで、あなた好みに設定できます。」

---

### 3.2 ダッシュボード（`/dashboard`）

#### 目的
ユーザーが所有するボットの一覧表示と管理。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header: ロゴ  [録画] [設定] [アバター▼]  │
├─────────────────────────────────────────┤
│                                         │
│  「こんにちは、○○さん！」                  │
│                                         │
│  あなたのボット        [+ 新しいボット]     │
│  ┌─────────────────────────────────┐    │
│  │ 🤖 ボット名A                    │    │
│  │ インタラクティブ: ON  録画: ON    │    │
│  │ [編集] [招待] [削除]             │    │
│  └─────────────────────────────────┘    │
│  ┌─────────────────────────────────┐    │
│  │ 🤖 ボット名B                    │    │
│  │ インタラクティブ: OFF  録画: ON   │    │
│  │ [編集] [招待] [削除]             │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ─ 最近の録画 ─                          │
│  ┌────────┐ ┌────────┐ ┌────────┐      │
│  │録画1    │ │録画2    │ │録画3    │      │
│  │日時     │ │日時     │ │日時     │      │
│  └────────┘ └────────┘ └────────┘      │
│  [すべての録画を見る →]                    │
│                                         │
└─────────────────────────────────────────┘
```

#### 機能
- ボットカードの一覧表示（カード形式）
- 新規ボット作成ボタン
- 各ボットに対する編集・招待・削除アクション
- 最近の録画のサムネイル表示（最大3件）
- ボットが0件の場合、空状態の案内表示（作成を促すイラスト＋テキスト）

---

### 3.3 ボット作成（`/bots/new`）

#### 目的
新しいボットを作成し、各機能を設定する。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header                                 │
├─────────────────────────────────────────┤
│  ← 戻る    新しいボットを作成              │
│                                         │
│  ■ 基本設定                              │
│  ┌─────────────────────────────────┐    │
│  │ ボット名: [__________________]   │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ■ 機能設定                              │
│  ┌─────────────────────────────────┐    │
│  │ インタラクティブ機能  [ON/OFF]    │    │
│  │ 録画機能             [ON/OFF]    │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ■ インタラクティブ設定                    │
│  （インタラクティブ機能がONの場合表示）      │
│  ┌─────────────────────────────────┐    │
│  │ 呼び出し方:                      │    │
│  │ ○ チャットのみ                   │    │
│  │ ○ 名前に反応                     │    │
│  │ ○ 全ての発話に反応               │    │
│  │                                 │    │
│  │ ボット機能:                      │    │
│  │ ☑ リアクション                   │    │
│  │   指示文: [__________________]   │    │
│  │ ☑ チャット                      │    │
│  │   指示文: [__________________]   │    │
│  │ ☑ 自動音声                      │    │
│  │   指示文: [__________________]   │    │
│  └─────────────────────────────────┘    │
│                                         │
│  [キャンセル]          [ボットを作成]       │
│                                         │
└─────────────────────────────────────────┘
```

#### バリデーション
- ボット名: 必須、1〜50文字
- インタラクティブ機能ONの場合、呼び出し方は必須選択
- 指示文: 任意、最大1000文字

---

### 3.4 ボット詳細・編集（`/bots/detail?id={botId}`）

#### 目的
既存ボットの設定確認と編集。

#### 構成要素
- ボット作成画面と同じフォーム構成
- 既存設定値がプリフィルされた状態で表示
- 上部にボットのステータス表示（待機中 / ミーティング参加中）
- 変更保存ボタン
- 削除ボタン（確認ダイアログ付き）

---

### 3.5 ボット招待（`/bots/invite?id={botId}`）

#### 目的
作成済みボットをGoogle Meetミーティングに招待する。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header                                 │
├─────────────────────────────────────────┤
│  ← 戻る    ボットを招待                    │
│                                         │
│  🤖 ボット名A をミーティングに招待           │
│                                         │
│  ┌─────────────────────────────────┐    │
│  │ Google Meet URL:                 │    │
│  │ [https://meet.google.com/___]    │    │
│  │                                 │    │
│  │ ※ Google Meet のURLを貼り付けて    │    │
│  │   ください                       │    │
│  └─────────────────────────────────┘    │
│                                         │
│  [キャンセル]          [招待する]          │
│                                         │
│  ─ 現在参加中のミーティング ─               │
│  (参加中のミーティングがあれば表示)          │
│  meet.google.com/xxx-xxxx-xxx           │
│  参加開始: 2026-02-21 14:00 [退出させる]   │
│                                         │
└─────────────────────────────────────────┘
```

#### バリデーション
- Google Meet URL 形式チェック（`https://meet.google.com/` で始まること）

---

### 3.6 録画一覧（`/recordings`）

#### 目的
ボットが録画したミーティングの一覧表示。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header                                 │
├─────────────────────────────────────────┤
│  録画一覧                                │
│                                         │
│  フィルター: [ボット▼] [日付範囲]           │
│                                         │
│  ┌─────────────────────────────────┐    │
│  │ 📹 ミーティング名 / Meet URL      │    │
│  │ ボット: ボット名A                  │    │
│  │ 日時: 2026-02-21 14:00-15:00     │    │
│  │ 時間: 60分                       │    │
│  │ [再生] [削除]                     │    │
│  └─────────────────────────────────┘    │
│  ┌─────────────────────────────────┐    │
│  │ 📹 ミーティング名 / Meet URL      │    │
│  │ ...                              │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ページネーション: < 1 2 3 >              │
│                                         │
└─────────────────────────────────────────┘
```

#### 機能
- ボット別フィルター
- 録画の削除（確認ダイアログ付き）

> **現在の実装状況**: 日付範囲フィルター、ページネーションは未実装。最大50件を一括取得して表示。

---

### 3.7 録画詳細（`/recordings/detail?id={recordingId}`）

#### 目的
録画の再生と詳細情報の確認。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header                                 │
├─────────────────────────────────────────┤
│  ← 戻る    録画詳細                       │
│                                         │
│  ┌─────────────────────────────────┐    │
│  │                                 │    │
│  │        動画プレーヤー              │    │
│  │                                 │    │
│  │  ▶ ━━━━━━━━━━━━━━ 00:00/60:00  │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ミーティング情報                          │
│  ┌─────────────────────────────────┐    │
│  │ ボット: ボット名A                  │    │
│  │ Meet URL: meet.google.com/xxx    │    │
│  │ 日時: 2026-02-21 14:00-15:00     │    │
│  │ 録画時間: 60分                    │    │
│  │ ファイルサイズ: 120MB              │    │
│  └─────────────────────────────────┘    │
│                                         │
│  [ダウンロード]          [削除]            │
│                                         │
└─────────────────────────────────────────┘
```

---

### 3.8 設定（`/settings`）

#### 目的
ユーザーアカウントの設定管理。

#### 構成要素

```
┌─────────────────────────────────────────┐
│  Header                                 │
├─────────────────────────────────────────┤
│  設定                                    │
│                                         │
│  ■ アカウント情報                          │
│  ┌─────────────────────────────────┐    │
│  │ 名前: 山田 太郎                    │    │
│  │ メール: taro@gmail.com           │    │
│  │ (Googleアカウントから取得・編集不可)  │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ■ 言語設定                              │
│  ┌─────────────────────────────────┐    │
│  │ 表示言語: [日本語 ▼]              │    │
│  │           日本語                  │    │
│  │           English                │    │
│  └─────────────────────────────────┘    │
│                                         │
│  ■ アカウント操作                          │
│  ┌─────────────────────────────────┐    │
│  │ [ログアウト]                      │    │
│  │ [アカウントを削除する] (赤文字)     │    │
│  └─────────────────────────────────┘    │
│                                         │
│  [保存]                                  │
│                                         │
└─────────────────────────────────────────┘
```

---

## 4. 画面遷移フロー

```
ランディングページ (/)
  │
  ├── [Googleでログイン] ──→ Cognito Hosted UI ──→ Google OAuth
  │                                                    │
  │                                              認証コールバック (/{locale}/auth/callback)
  │                                                    │
  │                                              ダッシュボード (/{locale}/dashboard)
  │                                                    │
  │                                                    ├── [+ 新しいボット] ──→ ボット作成 (/{locale}/bots/new)
  │                                                    │                         │
  │                                                    │                         └── [作成完了] ──→ ダッシュボード
  │                                                    │
  │                                                    ├── [編集] ──→ ボット詳細・編集 (/{locale}/bots/detail?id={botId})
  │                                                    │
  │                                                    ├── [招待] ──→ ボット招待 (/{locale}/bots/invite?id={botId})
  │                                                    │
  │                                                    ├── [録画] ──→ 録画一覧 (/{locale}/recordings)
  │                                                    │               │
  │                                                    │               └── [再生] ──→ 録画詳細 (/{locale}/recordings/detail?id={recordingId})
  │                                                    │
  │                                                    └── [設定] ──→ 設定 (/{locale}/settings)
```

---

## 5. 共通コンポーネント

### 5.1 ヘッダー（認証後）
- ロゴ「Colon」（クリックでダッシュボードへ）
- 録画一覧リンク（「録画」）
- 設定リンク（「設定」）
- ユーザーアバター（名前のイニシャル表示）＋ドロップダウン（設定、ログアウト）
- モバイル時: ハンバーガーメニューで展開

### 5.2 確認ダイアログ
- ボット削除、録画削除、アカウント削除時に表示
- 「本当に削除しますか？この操作は取り消せません。」
- [Cancel] [削除する] ボタン
  - ※ 現在の実装ではキャンセルボタンのラベルが英語「Cancel」のまま
- Escapeキーで閉じる対応、ポータル描画、背景スクロールロック対応

### 5.3 トースト通知
- 操作成功時: 緑色トースト（「ボットを作成しました」等）
- 操作失敗時: 赤色トースト（「エラーが発生しました。もう一度お試しください。」）
- 3秒で自動消去

### 5.4 ローディング
- API通信中は「読み込み中...」テキストを表示（スケルトンスクリーンは未実装）
- ボタン操作中はボタン内にSVGスピナー表示＋二重送信防止（`loading` props）

### 5.5 空状態（Empty State）
- ボットが0件: 絵文字（🤖）＋「まだボットがありません。最初のボットを作成しましょう！」
- 録画が0件: 絵文字（📹）＋「まだ録画がありません。ボットを招待して録画を始めましょう！」
- ※ イラストの代わりに絵文字を使用している

### 5.6 UIコンポーネント一覧

| コンポーネント | ファイル | 主なProps | 説明 |
|---|---|---|---|
| `Button` | `components/ui/button.tsx` | `variant` (primary/secondary/danger/ghost), `size` (sm/md/lg), `loading` | `forwardRef` 対応、ローディング時 SVG スピナー表示 |
| `Card` | `components/ui/card.tsx` | `title`, `children`, `className` | 角丸ボーダー付きコンテナ |
| `Dialog` | `components/ui/dialog.tsx` | `open`, `onClose`, `onConfirm`, `title`, `variant`, `confirmLabel`, `cancelLabel` | `createPortal` 描画、Escape キー対応、背景スクロールロック |
| `Input` | `components/ui/input.tsx` | `label`, `error`, `helperText` | `forwardRef` 対応、aria 属性付き |
| `Toast` | `components/ui/toast.tsx` | `showToast(message, type)` | Context ベース、3秒自動消去、success（緑）/ error（赤） |
| `Toggle` | `components/ui/toggle.tsx` | `label`, `checked` | CSS peer セレクタによるカスタムスイッチ |
| `BotCard` | `components/features/bot-card.tsx` | `bot`, `onEdit`, `onInvite`, `onDelete` | ステータスバッジ、機能 ON/OFF 表示 |
| `BotForm` | `components/features/bot-form.tsx` | `initialData`, `onSubmit`, `submitLabel` | ボット作成/編集共通フォーム |
| `RecordingCard` | `components/features/recording-card.tsx` | `recording`, `onPlay`, `onDelete` | ステータスバッジ、日時・時間表示 |

---

## 6. レスポンシブ対応

| ブレークポイント | 幅 | 対応 |
|---|---|---|
| Mobile | 〜767px | 1カラム、ハンバーガーメニュー |
| Tablet | 768px〜1023px | 2カラムグリッド |
| Desktop | 1024px〜 | フルレイアウト |

---

## 7. アクセシビリティ

- セマンティックHTML使用
- フォーム要素にラベル付与
- キーボードナビゲーション対応
- 色のコントラスト比 WCAG AA 準拠
- スクリーンリーダー対応（aria属性）
